{% extends "base.twig" %}

{% block content %}
<div class="container">
  <h2>Routes:</h2>
  {% if routes|length == 0 %}
      <div class="well">No routes were found.</div>
  {% else %}
  <div>
    <form class="form-inline" action="/routes/search" method="get">
    <datalist id="browsers">
      {% set airports = [] %}
      {% for route in routes %}
        {% if route.departure not in airports %}
          {% set airports = airports|merge([route.departure]) %}
          <option value={{route.departure}}>
        {% endif %}
        {% if route.arrival not in airports %}
          {% set airports = airports|merge([route.arrival]) %}
          <option value={{route.arrival}}>
        {% endif %}        
      {% endfor %}
    </datalist>
      <label><h4>From: </h4></label>
      <input class="form-control" type="text" list="browsers" name="from" placeholder="YVR">
        
      <label><h4>To: </h4></label>
      <input class="form-control" type="text" list="browsers" name="to" placeholder="YYJ">
      <input class="btn btn-primary" type="submit" value="Search">
    </form>
  </div>
  <table class="table table-hover">
    <thead>
      <tr>
        <td>Departure Airport</td>
        <td>Arrival Airport</td>
        <td>First Class Seats</td>
        <td>Business Seats</td>
        <td>Economy Seats</td>
      </tr>
    </thead>
    <tbody>
      {% for route in routes %}
         <tr>
          <td>{{route.departure}}</td>
          <td>{{route.arrival}}</td>
          <td>{{route.firstClass}}</td>
          <td>{{route.business}}</td>
          <td>{{route.economy}}</td>
        </tr>
      {% endfor %}
    </tbody>
  </table>
  {% endif %}
</div>
{% endblock %}
